<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>合同</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
</head>

<script src="../layui/layui.all.js"></script>
<script src="../layui/layui.js"></script>

<script>
    layui.use(['table','form'], function () {
        var table = layui.table;
        var form = layui.form;

        //第一个实例
        table.render({
            elem: '#demo'
            , url: '../crm/contract/queryAllContract.do?classify=0' //数据接口
            , page: true //开启分页
            , cols: [[ //表头
                {
                    title: '合同全称'
                    , width: 300
                    , fixed: 'left'
                    ,templet: '<div><a href="../crm/contract/queryByContract.do?contractId={{d.contractId}}" target="_blank" style="color: #1E9FFF;" onMouseOver="this.style.color=\'#000000\'" onMouseOut="this.style.color=\'#1E9FFF\'">{{d.contractName}}</a></div>'
                }
                , {field: 'contractNo', title: '合同编号', width: 150}
                , {field: 'contractSum', title: '合同金额', width: 170, sort: true}
                , {
                    title: '汇款额度'
                    , width: 190
                    , templet: '<div><a href="../crm/earninga/queryContractEarninga.do?contractId={{d.contractId}}" target="_blank" style="color: #1E9FFF;" onMouseOver="this.style.color=\'#000000\'" onMouseOut="this.style.color=\'#1E9FFF\'">{{d.earningNum}}</a></div>'
                }
                , {
                    title: '开票额'
                    , width: 190
                    , templet: '<div><a href="../crm/apply-invoice/queryContractApplyInvoice.do?contractId={{d.contractId}}" target="_blank" style="color: #1E9FFF;" onMouseOver="this.style.color=\'#000000\'" onMouseOut="this.style.color=\'#1E9FFF\'">{{d.address}}</a></div>'
                }
                , {field: 'signDate', title: '签约日期', width: 180}
            ]]
        });

        //监听提交
        form.on('submit(formDemo)', function(data){
            if(data.field.type == null || data.field.type == '' || data.field.type == undefined){
                table.reload('demo', {//将id为demo的表格进行重载
                    url: '../crm/contract/queryAllContract.do?classify=0'
                });
            }else{
                table.reload('demo', {//将id为demo的表格进行重载
                    url: '../crm/contract/queryAllContract.do'
                    , where: {
                        "classify": 0
                        ,"type": data.field.type//这里type引不引都可以,type为下拉框value
                        , "typeValue": data.field.typeValue//content为文本框值
                        , "classify": data.field.classify//content为文本框值
                    } //设定异步数据接口的额外参数
                });
            }
            return false;//阻止表格跳转
        });

        window.queryContract = function (classify) {
            if(classify != null){
                document.getElementById("classify").value = classify;
                table.reload('demo', {//将id为demo的表格进行重载
                    url: '../crm/contract/queryAllContract.do?classify='+classify
                });
            }
        }

    });

    function addContract(){
        window.open("../crm/contract/queryBusinessContract.do");
    }
    function refresh(){
        location.reload();
    }
</script>

<style type="text/css">
    .exp {
        border-radius: 3px 4px 5px 6px;
        border: 2px solid #DBDBDB
    }
</style>

<body>

<div style="display: inline-block;width: 100%">
    <br/><br/>
    <!--左菜单-->
    <div style="float: left;width: 19%">
        <img src="../img/main.png">
        <span style="font-size: 20px;">
            &nbsp;&nbsp;全部合同
        </span>
        <div style="width: 95%;height: 300px;" class="exp">
            <!--分类-->
            <div class="layui-bg-gray" style="height: 27px;">
                <span style="text-align: center;font-weight:bold;color: #000000;">
                    分类
                </span>
            </div>
            <!--所有分类-->
            <!-- 所有合同 -->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(0)">所有合同</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">6</span>
            </div>
            <!--本周新增-->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(1001)">本周新增</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">6</span>
            </div>
            <!--上周新增-->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(1002)">上周新增</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">0</span>
            </div>
            <!--本月新增-->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(1003)">本月新增</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">2</span>
            </div>
            <!--上月新增-->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(1004)">上月新增</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">1</span>
            </div>
            <!--本季度新增-->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(1005)">本季度新增</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">2</span>
            </div>
            <!--上季度新增-->
            <div>
                <img src="../img/wenjianjia.png" style="height:18px;width:21px;">
                <span style="font-size: 13px;line-height: 2;">
                    &nbsp;&nbsp;<a style="color: #1E9FFF;" onMouseOver="this.style.color='#000000'" onMouseOut="this.style.color='#1E9FFF'" onclick="queryContract(1006)">上季度新增</a>
                </span>
                &nbsp;&nbsp;<span style="text-align: center;background-color: #1E9FFF;display:inline-block;width: 25px;border-radius:2em;">7</span>
            </div>
        </div>
    </div>

    <!--右菜单-->
    <div style="float: right;width: 79%">

        <form class="layui-form" action="">
            <input type="hidden" name="classify" id="classify" value="0">
            <!--下拉框-->
            <div class="layui-form-item layui-inline">
                <select name="type">
                    <option value="" ></option>
                    <option value="1001">按合同名称</option>
                    <option value="1002">按客户名称</option>
                    <option value="1003">按商机名称</option>
                    <option value="1004">按签约日期</option>
                </select>
            </div>
            <!--请输入内容-->
            <div class="layui-form-item layui-inline">
                <input type="text" name="typeValue" placeholder="请输入内容" autocomplete="off" class="layui-input" style="width: 300px;border-radius:15px;">
            </div>
            <!--查找-->
            <div class="layui-form-item layui-inline">
                <button class="layui-btn layui-btn-radius layui-btn-primary" lay-submit lay-filter="formDemo">
                    <i class="layui-icon layui-icon-search"></i>查找
                </button>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <!--新增合同-->
            <div class="layui-form-item layui-inline">
                <button class="layui-btn layui-btn-radius layui-btn-primary" onclick="addContract()">
                    <i class="layui-icon layui-icon-add-1"></i>新增合同
                </button>
            </div>
            <!--刷新-->
            <div class="layui-form-item layui-inline">
                <button class="layui-btn layui-btn-radius layui-btn-primary" onclick="refresh()">
                    <i class="layui-icon layui-icon-refresh-1"></i>刷新
                </button>
            </div>
        </form>
        <!--查询表格-->
        <table id="demo" class="layui-table" lay-skin="line" lay-size="sm" lay-even lay-skin="nob">
            <colgroup>
                <col width="150">
                <col width="200">
            </colgroup>
        </table>
    </div>
</div>

</body>
</html>